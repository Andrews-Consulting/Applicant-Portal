<aura:component implements="forceCommunity:availableForAllPageTypes,force:hasRecordId" controller="DX_CreateNA" access="global">

    <aura:attribute name="showError" type="Boolean" />
    <aura:attribute name="errorMessage" type="string" />

    <aura:attribute name="exit" type="Boolean" required="true" description="" default="false" access="private" />
    <aura:attribute name="showNext" type="Boolean" required="true" description="" default="false" access="private" />
    <aura:attribute name="showRadio" type="Boolean" required="true" description="" default="false" access="private" />
	
    <aura:attribute name="lic" type="MUSW__License2__c" default="{'sobjectType':'MUSW__License2__c'}" />
	<aura:attribute name="LicenseTypes" type="Object" default="" />
    <aura:attribute name="lTypes" type="String" default="" />
    <aura:attribute name="os" type="String" default="" />
    <aura:attribute name="showLE" type="Boolean" required="true" default="false"/>
    <aura:attribute name="showSQBC" type="Boolean" required="true" default="false"/>
    <aura:attribute name="showVO" type="Boolean" required="true" default="false"/>
    <aura:attribute name="showLD" type="Boolean" required="true" default="false"/>
    <aura:attribute name="showOutdoor" type="Boolean" required="true" default="false"/>
	
	<aura:registerevent name="SaveCompleted" type="c:dx_actionComplete" />
    <aura:registerevent name="EmptyComponent" type="c:dx_actionComplete" />
    <aura:method name="PerformSave" action="{!c.save}" />
    <aura:method name="PerformInit" action="{!c.doInit}" />

    <div class="slds-grid slds-wrap slds-grid--pull-padded">
        <div class="slds-col slds-small-size--1-of-1 slds-medium-size--1-of-1">
        	<aura:if isTrue="{!v.showRadio}">
                <div class="slds-grid slds-wrap slds-grid--pull-padded">
	                <div class="slds-col slds-small-size--1-of-1 slds-medium-size--1-of-8" />
	                <div class="slds-col slds-small-size--1-of-1 slds-medium-size--3-of-8 padded">
	                    <h1>Application to Add Privileges</h1>
			        	<p>Please select the privileges to add to the existing license</p>
			        	<br/><br/>
			            <h1>Already Existing</h1>
	                    <div class="slds-grid slds-wrap slds-grid--pull-padded">
	                        <div class="slds-col slds-p-horizontal slds-small-size--1-of-1 slds-medium-size--1-of-2">
	                            <aura:iteration items="{!v.LicenseTypes.existing}" var="itemE" indexVar="index">
	                                <div aura:id="radio" class="slds-form-element__control">
	                                    <ui:inputRadio click="{!c.handleRadioChange}" name="{!'E'+index}" value="{!itemE.selected}" disabled="{!itemE.required}" />
	                                    <label class="uiLabel-right form-element__label uiLabel">
                                        	{!itemE.ltype.abd_Class__c}
                                        </label>
	                                </div>
	                            </aura:iteration>
	                        </div>
	                    </div>
	                </div>
	                <div class="slds-col slds-small-size--1-of-1 slds-medium-size--1-of-8" />
	                <div class="slds-col slds-small-size--1-of-1 slds-medium-size--2-of-8"/>
	                <div class="slds-col slds-small-size--1-of-1 slds-medium-size--1-of-8" />
	            </div>
	            <div class="slds-grid slds-wrap slds-grid--pull-padded">
	                <div class="slds-col slds-small-size--1-of-1 slds-medium-size--7-of-7">&nbsp;</div>
	            </div>
            </aura:if>
        </div>
        <div class="slds-col slds-small-size--1-of-1 slds-medium-size--1-of-1">
            <aura:if isTrue="{!v.showRadio}">
                <div class="slds-grid slds-wrap slds-grid--pull-padded">
<!-- left half -->                
	                <div class="slds-col slds-small-size--1-of-1 slds-medium-size--1-of-8" />
	                <div class="slds-col slds-small-size--1-of-1 slds-medium-size--3-of-8 padded">
	                    <h1>Additional licenses and privilege</h1>
	                    <div class="slds-grid slds-wrap slds-grid--pull-padded">
	                        <div class="slds-col slds-p-horizontal slds-small-size--1-of-1 slds-medium-size--1-of-2">
	                            <aura:iteration items="{!v.LicenseTypes.optional}" var="itemO" indexVar="index" end="4">
	                                <div aura:id="radio" class="slds-form-element__control">
	                                    <ui:inputRadio click="{!c.handleRadioChange}" name="{!'O'+index}" value="{!itemO.selected}" disabled="{!itemO.required}" />
	                                    <label class="uiLabel-right form-element__label uiLabel">
	                                            <span class="{!(itemO.required)?'strike':''}" title="{!(itemO.required)?' included with Class B Wine Permit':''}">{!itemO.ltype.abd_Class__c}</span>
	                                        </label>
	                                </div>
	                            </aura:iteration>
	                        </div>
	                        <div class="slds-col slds-p-horizontal slds-small-size--1-of-1 slds-medium-size--1-of-2">
	                            <aura:iteration items="{!v.LicenseTypes.optional}" var="itemO" indexVar="index" start="4">
	                                <div aura:id="radio" class="slds-form-element__control">
	                                    <ui:inputRadio click="{!c.handleRadioChange}" name="{!'O'+index}" value="{!itemO.selected}" disabled="{!itemO.required}" />
	                                    <label class="uiLabel-right form-element__label uiLabel">
	                                            <span class="{!(itemO.required)?'strike':''}" title="{!(itemO.required)?' included with Class B Wine Permit':''}">{!itemO.ltype.abd_Class__c}</span>
	                                        </label>
	                                </div>
	                            </aura:iteration>
	                        </div>
	                    </div>
	                </div>
<!-- right half -->
	                <div class="slds-col slds-small-size--1-of-1 slds-medium-size--1-of-8" />
	                <div class="slds-col slds-small-size--1-of-1 slds-medium-size--2-of-8 padded">
	                    <h1>Included licenses and privileges</h1>
	                    <div class="slds-grid slds-wrap slds-grid--pull-padded">
	                        <div class="slds-col slds-size--1-of-1 padded">
	                            <aura:iteration items="{!v.LicenseTypes.included}" var="itemL" indexVar="index">
	                                <div aura:id="radio" class="slds-form-element__control">
	                                    <ui:inputRadio click="{!c.handleRadioChange}" name="{!'I'+index}" value="{!itemL.selected}" disabled="{!itemL.required}" />
	                                    <label class="uiLabel-right form-element__label uiLabel">
	                                            <span>{!itemL.ltype.abd_Class__c}</span>
	                                        </label>
	                                </div>
	                            </aura:iteration>
	                        </div>
	                    </div>
	                </div>
	                <div class="slds-col slds-small-size--1-of-1 slds-medium-size--1-of-8" />
	            </div>
<!-- Dates and schedules and such -->

 				<div class="slds-grid slds-wrap slds-grid--pull-padded">
<!-- Left hand --> 				
					<div class="slds-col slds-small-size--1-of-1 slds-medium-size--1-of-2" >
						<div id="slds-form-element slds-is-required" class="slds-container--left slds-container--small" aura:id="port">
							<div class="slds-grid slds-wrap">
								<lightning:input type="radio" label="Permanent" value="Permanent" name="port" checked="true" onchange="{!c.radioChange}"/>
								<lightning:input type="radio" label="Temporary" value="Temporary" name="port" onchange="{!c.radioChange}"/>
							</div>
						</div>
			
						<div class="slds-grid slds-wrap">
							<div class="slds-col slds-size--1-of-1 slds-medium-size--1-of-2">
								<div id="slds-form-element slds-is-required" class="slds-container--left slds-container--small">
									<ui:inputDate label="Start Date" required="true" value="{!v.app.abd_Effective_Date__c}" displayDatePicker="true" />
								</div>
							</div>
							<div class="slds-col slds-size--1-of-1 slds-medium-size--1-of-2">
								<aura:renderIf isTrue="{!v.app.abd_Temporary_or_Permanent__c=='Temporary'}">
									<div id="slds-form-element slds-is-required" class="slds-container--right slds-container--small">
										<ui:inputDate label="End Date" required="true" value="{!v.app.abd_Effective_End_Date__c}" displayDatePicker="true" />
									</div>
								</aura:renderIf>
							</div>
						</div>
					</div>
<!-- right hand side -->
					<div class="slds-col slds-small-size--1-of-1 slds-medium-size--1-of-2" >
						<label class="slds-form-element__label"  for="schedule">If this is a recurring event, please describe the schedule</label>
						<lightning:input label="" value="{!v.app.MUSW__Description__c}" />
					</div>
				</div>

<!-- questions as a result of the added privileges -->
	            <div class="slds-grid slds-wrap slds-grid--pull-padded">
	                <div class="slds-col slds-small-size--1-of-1 slds-medium-size--1-of-7" />
	                <div class="slds-col slds-small-size--1-of-1 slds-medium-size--5-of-7 padded">
	                	<aura:renderIf isTrue="{!v.showLE}">
	                        <label class="slds-form-element__label" for="gas">
	                            <abbr class="slds-required">*</abbr>Do you sell gasoline?
	                        </label>
	                        <div id="slds-form-element slds-is-required" class="slds-container--left slds-container--medium padded" aura:id="gas">
	                            <div class="slds-grid slds-wrap">
	                                <lightning:input type="radio" label="Yes" value="Yes" name="gas" onchange="{!c.radioChange}" aura:id="gasYes"/>
	                                <lightning:input type="radio" label="No" value="No" name="gas" onchange="{!c.radioChange}" aura:id="gasNo"/>
	                            </div>
	                        </div>
	                    </aura:renderIf>
	                    <aura:renderIf isTrue="{!v.showLE}">
	                        <div id="slds-form-element slds-is-required" class="slds-container--left slds-container--medium">
	                            <lightning:input label="Square footage of the entire interior area of the building, including, but not limited to, 
	                                            all areas used in the storage, distribution, wholesale and retail sale of merchandise, offices, 
	                                            bathrooms, break rooms etc." name="abd_Square_Footage__c" required="true" value="{!v.lic.abd_Square_Footage__c}" onchange="{!c.handleSqChange}" pattern="^(0|[1-9]\d*)$" messageWhenPatternMismatch="Your entry must be a valid number."/>
	                        </div>
	                    </aura:renderIf>
	                    <aura:renderIf isTrue="{!v.showSQBC}">
	                        <div id="slds-form-element slds-is-required" class="slds-container--left slds-container--medium">
	                            <lightning:input label="Square footage of the entire retail sales area of the business, including area of walk-in coolers 
	                                            that are accessible to the public. This includes all areas where non-alcohol products are also sold. 
	                                            Do not include areas that are not accessible to the public (offices, bathroom, kitchen, storage area etc.)." 
	                                            name="abd_Square_Footage_Retail_Area__c" required="true" value="{!v.lic.abd_Square_Footage_Retail_Area__c}" onchange="{!c.handleSqChange}" pattern="^(0|[1-9]\d*)$" messageWhenPatternMismatch="Your entry must be a valid number."/>
	                        </div>
	                    </aura:renderIf>
	                    <aura:renderIf isTrue="{!v.showVO}">
	                        <label class="slds-form-element__label" for="VO">
	                            <abbr class="slds-required">*</abbr>Veterans Organizations: Is your lodge or fraternal organization chartered by the Congress of the United States and open only 1 day a week?
	                        </label>
	                        <div id="slds-form-element slds-is-required" class="slds-container--left slds-container--medium padded" aura:id="VO">
	                            <div class="slds-grid slds-wrap">
	                                <lightning:input type="radio" label="Yes" value="Yes" name="VO" onchange="{!c.radioChange}" aura:id="VOYes"/>
	                                <lightning:input type="radio" label="No" value="No" name="VO" onchange="{!c.radioChange}" aura:id="VONo"/>
	                            </div>
	                        </div>
	                        <aura:renderIf isTrue="{!v.lic.abd_Veterans_Organization__c=='No'}">
		                    	<label class="slds-form-element__label" for="clubMembers">
		                            <abbr class="slds-required">*</abbr>Does your club have 250 or more members?
		                        </label>
		                        <div id="slds-form-element slds-is-required" class="slds-container--left slds-container--medium padded" aura:id="clubMembers">
		                            <div class="slds-grid slds-wrap">
		                                <lightning:input type="radio" label="Yes" value="Yes" name="clubMembers" onchange="{!c.radioChange}" aura:id="clubMembersYes"/>
		                                <lightning:input type="radio" label="No" value="No" name="clubMembers" onchange="{!c.radioChange}" aura:id="clubMembersNo"/>
		                            </div>
		                        </div>
	                        </aura:renderIf>
	                    </aura:renderIf>
	                    <aura:renderIf isTrue="{!v.showLD}">
	                        <div id="slds-form-element slds-is-required" class="slds-container--left slds-container--medium">
	                            <label class="slds-form-element__label" for="vehicle">
	                                <abbr class="slds-required">*</abbr>Is the premises a Plane, Train, or Boat?
	                            </label>
	                            <ui:inputSelect aura:id="vehicle" value="{!v.lic.abd_Premise_Vehicles_Type__c}" change="{!c.handleChange}"/>
	                        </div>
	                    </aura:renderIf>
	                    <aura:renderIf isTrue="{!v.showOutdoor}">
							<div id="slds-form-element slds-is-required" class="slds-container--left slds-container--large">
								<lightning:textarea label="Please describe the Outdoor Service Area Boundaries" name="boundaries" required="true" value="{!v.os}" maxlength="32768"/>
							</div>
						</aura:renderIf>
	                </div>
	                <div class="slds-col slds-small-size--1-of-1 slds-medium-size--1-of-7" />
	            </div>
            </aura:if>
        </div>
    </div>
</aura:component>